<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Image Filesystem: Configuring Kubernetes to store containers on a separate filesystem"><title>é•œåƒæ–‡ä»¶ç³»ç»Ÿï¼šé…ç½® Kubernetes å°†å®¹å™¨å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸Š</title><link rel=canonical href=https://www.acgh.top/k8s/2024/03/06/kubernetes-separate-image-filesystem/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="é•œåƒæ–‡ä»¶ç³»ç»Ÿï¼šé…ç½® Kubernetes å°†å®¹å™¨å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸Š"><meta property='og:description' content="Image Filesystem: Configuring Kubernetes to store containers on a separate filesystem"><meta property='og:url' content='https://www.acgh.top/k8s/2024/03/06/kubernetes-separate-image-filesystem/'><meta property='og:site_name' content='Techoc`s'><meta property='og:type' content='article'><meta property='article:section' content='K8s'><meta property='article:tag' content='Kubernetes'><meta property='article:tag' content='Kubernetes blog'><meta property='article:tag' content='ç¿»è¯‘'><meta property='article:published_time' content='2024-03-06T00:08:00+08:00'><meta property='article:modified_time' content='2024-03-06T00:08:00+08:00'><meta property='og:image' content='https://img.picgo.net/2024/03/05/_20240305223322f97c305c6e79f24e.jpeg'><meta name=twitter:title content="é•œåƒæ–‡ä»¶ç³»ç»Ÿï¼šé…ç½® Kubernetes å°†å®¹å™¨å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸Š"><meta name=twitter:description content="Image Filesystem: Configuring Kubernetes to store containers on a separate filesystem"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://img.picgo.net/2024/03/05/_20240305223322f97c305c6e79f24e.jpeg'><link rel="shortcut icon" href=/favicon.png><style>:root{--article-font-family:"Maple Mono CN", var(--base-font-family)}</style><script>(function(){const e=document.createElement("link");e.href="./MapleMono-CN-Regular/result.css",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/48900433.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ’¤</span></figure><div class=site-meta><h1 class=site-name><a href=/>Techoc`s</a></h1><h2 class=site-description>ä¸å›°ã€ä¸æƒ‘ã€ä¸å¿§ã€ä¸æƒ§ã€‚</h2></div></header><ol class=menu-social><li><a href=https://github.com/techoc target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/tags/><svg class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg>
<span>Tags</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ç†è§£-kubernetes-ç£ç›˜çš„ä½¿ç”¨>ç†è§£ Kubernetes ç£ç›˜çš„ä½¿ç”¨</a><ol><li><a href=#ä¸´æ—¶å­˜å‚¨>ä¸´æ—¶å­˜å‚¨</a></li><li><a href=#æ—¥å¿—>æ—¥å¿—</a></li><li><a href=#å®¹å™¨è¿è¡Œæ—¶>å®¹å™¨è¿è¡Œæ—¶</a></li></ol></li><li><a href=#å®¹å™¨è¿è¡Œæ—¶é…ç½®>å®¹å™¨è¿è¡Œæ—¶é…ç½®</a><ol><li><a href=#cri-o>CRI-O</a></li><li><a href=#containerd>containerd</a></li></ol></li><li><a href=#kubernetes-èŠ‚ç‚¹å‹åŠ›é©±é€>Kubernetes èŠ‚ç‚¹å‹åŠ›é©±é€</a><ol><li><a href=#é—®é¢˜>é—®é¢˜</a></li><li><a href=#åç»­å·¥ä½œ>åç»­å·¥ä½œ</a></li><li><a href=#å‚ä¸å…¶ä¸­>å‚ä¸å…¶ä¸­</a></li></ol></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/k8s/2024/03/06/kubernetes-separate-image-filesystem/><img src=https://img.picgo.net/2024/03/05/_20240305223322f97c305c6e79f24e.jpeg loading=lazy alt="Featured image of post é•œåƒæ–‡ä»¶ç³»ç»Ÿï¼šé…ç½® Kubernetes å°†å®¹å™¨å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸Š"></a></div><div class=article-details><header class=article-category><a href=/categories/kubernetes/ style=background-color:#2a9d8f;color:#fff>Kubernetes</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/k8s/2024/03/06/kubernetes-separate-image-filesystem/>é•œåƒæ–‡ä»¶ç³»ç»Ÿï¼šé…ç½® Kubernetes å°†å®¹å™¨å­˜å‚¨åœ¨å•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿä¸Š</a></h2><h3 class=article-subtitle>Image Filesystem: Configuring Kubernetes to store containers on a separate filesystem</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>2024-03-06 00:08:00</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 6 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><p><strong>ä½œè€…ï¼š</strong> Kevin Hannon (Red Hat)</p><p><strong>è¯‘è€…ï¼š</strong> <a class=link href=https://github.com/techoc target=_blank rel=noopener>Rui Yang</a></p><p>è¿è¡Œæˆ–è€…æ“ä½œ Kubernetes é›†ç¾¤çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ç£ç›˜ç©ºé—´ä¸è¶³ã€‚
åœ¨é¢„åˆ†é…èŠ‚ç‚¹æ—¶ï¼Œä½ çš„ç›®æ ‡åº”è¯¥æ˜¯ä¸ºå®¹å™¨é•œåƒå’Œæ­£åœ¨è¿è¡Œçš„å®¹å™¨æä¾›å¤§é‡å­˜å‚¨ç©ºé—´ã€‚</p><p><a class=link href=https://kubernetes.io/docs/setup/production-environment/container-runtimes/ target=_blank rel=noopener>å®¹å™¨è¿è¡Œæ—¶</a>é€šå¸¸ä¼šå†™å…¥åˆ° <code>/var</code>ç›®å½•ä¸‹ã€‚
ä»–å¯ä»¥ä½äºå•ç‹¬çš„åˆ†åŒºæˆ–è€…ä½äºæ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚
åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒCRI-O å°†å…¶å®¹å™¨å’Œé•œåƒå†™å…¥ <code>/var/lib/containers</code>ç›®å½•ä¸‹ï¼Œè€Œ containerd å°†å…¶å®¹å™¨å’Œé•œåƒå†™å…¥ <code>/var/lib/containerd</code>
ç›®å½•ä¸‹ã€‚</p><p>åœ¨è¿™ç¯‡åšæ–‡ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å¼•èµ·æ‚¨çš„æ³¨æ„ï¼Œæ‚¨å¯ä»¥é…ç½®å®¹å™¨è¿è¡Œæ—¶ä»¥å°†å…¶å†…å®¹ä¸é»˜è®¤åˆ†åŒºåˆ†å¼€å­˜å‚¨ã€‚
è¿™ä½¿å¾—é…ç½® Kubernetes å˜å¾—æ›´åŠ çµæ´»ï¼Œå¹¶æ”¯æŒä¸ºå®¹å™¨å­˜å‚¨æ·»åŠ æ›´å¤§çš„ç£ç›˜ï¼ŒåŒæ—¶ä¿æŒé»˜è®¤æ–‡ä»¶ç³»ç»Ÿä¸å˜ã€‚</p><p>éœ€è¦è¯¦ç»†äº†è§£çš„æ˜¯ Kubernetes ä¼šå†™å…¥åˆ°ç£ç›˜å“ªé‡Œä»¥åŠå†™å…¥å“ªäº›å†…å®¹ã€‚</p><h2 id=ç†è§£-kubernetes-ç£ç›˜çš„ä½¿ç”¨>ç†è§£ Kubernetes ç£ç›˜çš„ä½¿ç”¨</h2><p>Kubernetes æœ‰æŒä¹…åŒ–çš„æ•°æ®å’Œä¸´æ—¶æ•°æ®ã€‚kubelet å’Œæœ¬åœ° Kubernetes
ç‰¹å®šçš„å­˜å‚¨çš„æ ¹è·¯å¾„æ˜¯å¯é…ç½®çš„ï¼Œä½†æ˜¯é€šå¸¸è®¤ä¸ºå®ƒä½äº <code>/var/lib/kubelet</code>ã€‚åœ¨ Kubernetes æ–‡æ¡£ä¸­ï¼Œè¿™æœ‰æ—¶è¢«ç§°ä¸ºæ ¹æˆ–èŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿã€‚è¯¥æ•°æ®çš„å¤§éƒ¨åˆ†å¯ä»¥åˆ†ä¸ºï¼š</p><ul><li>ä¸´æ—¶å­˜å‚¨</li><li>æ—¥å¿—</li><li>å®¹å™¨è¿è¡Œæ—¶</li></ul><p>è¿™ä¸å¤§å¤šæ•° POSIX ç³»ç»Ÿä¸åŒï¼Œå› ä¸ºæ ¹æˆ–è€…èŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿä¸æ˜¯ <code>/</code>ï¼Œè€Œæ˜¯ <code>/var/lib/kubelet</code> æ‰€åœ¨çš„ç£ç›˜ã€‚</p><h3 id=ä¸´æ—¶å­˜å‚¨>ä¸´æ—¶å­˜å‚¨</h3><p>Pod å’Œå®¹å™¨å¯èƒ½éœ€è¦ä¸´æ—¶æˆ–æš‚æ—¶çš„æœ¬åœ°å­˜å‚¨æ¥è¿›è¡Œæ“ä½œã€‚
ä¸´æ—¶å­˜å‚¨çš„ç”Ÿå‘½å‘¨æœŸä¸ä¼šè¶…è¿‡å•ä¸ª pod çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸”ä¸´æ—¶å­˜å‚¨ä¸èƒ½è·¨ pod å…±äº«ã€‚</p><h3 id=æ—¥å¿—>æ—¥å¿—</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes ä¼šå°†æ¯ä¸ªè¿è¡Œå®¹å™¨çš„æ—¥å¿—ï¼Œä½œä¸ºæ–‡ä»¶å­˜å‚¨åœ¨ <code>/var/log</code> ç›®å½•ä¸‹ã€‚
è¿™äº›æ—¥å¿—æ˜¯ä¸´æ—¶çš„ï¼Œç”± kubelet ç›‘æ§ï¼Œä»¥ç¡®ä¿å®ƒä»¬åœ¨è¿è¡ŒæœŸé—´ä¸ä¼šå˜å¾—å¤ªå¤§ã€‚</p><p>ä½ å¯ä»¥è‡ªå®šä¹‰æ¯ä¸ªèŠ‚ç‚¹çš„ <a class=link href=https://kubernetes.io/docs/concepts/cluster-administration/logging/#log-rotation target=_blank rel=noopener>æ—¥å¿—è½®è½¬</a>
è®¾ç½®ï¼Œä»¥ç®¡ç†è¿™äº›æ—¥å¿—çš„å¤§å°ï¼Œä»¥åŠé…ç½®æ—¥å¿—ä¼ è¾“ï¼ˆä½¿ç”¨ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆï¼‰ä»¥é¿å…ä¾èµ–äºèŠ‚ç‚¹æœ¬åœ°å­˜å‚¨ã€‚</p><h3 id=å®¹å™¨è¿è¡Œæ—¶>å®¹å™¨è¿è¡Œæ—¶</h3><p>å®¹å™¨è¿è¡Œæ—¶æœ‰ä¸¤ä¸ªä¸åŒçš„å­˜å‚¨åŒºåŸŸç”¨äºå®¹å™¨å’Œé•œåƒã€‚</p><ul><li>åªè¯»å±‚: é•œåƒé€šå¸¸è¢«æ ‡è®°ä¸ºåªè¯»å±‚ï¼Œå› ä¸ºå®ƒä»¬åœ¨å®¹å™¨è¿è¡Œæ—¶ä¸ä¼šè¢«ä¿®æ”¹ã€‚
åªè¯»å±‚å¯ä»¥ç”±å¤šä¸ªå±‚ç»„æˆï¼Œç„¶åç»„åˆæˆä¸€ä¸ªå•ç‹¬çš„åªè¯»å±‚ã€‚
åœ¨å®¹å™¨çš„é¡¶å±‚ä¸Šï¼Œæœ‰ä¸€ä¸ªè–„å±‚æä¾›å®¹å™¨çš„ä¸´æ—¶å­˜å‚¨ï¼Œå¦‚æœå®¹å™¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šå†™å…¥ï¼Œåˆ™å…¶å¯ä»¥æä¾›ä¸ºä¸´æ—¶å­˜å‚¨ã€‚</li></ul><ul><li>å¯å†™å±‚: ä¾èµ–äºæ‚¨çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œæœ¬åœ°å†™å…¥å¯èƒ½ä¼šä½¿ç”¨åŸºäºå±‚çš„å†™æœºåˆ¶ï¼ˆä¾‹å¦‚ï¼ŒLinux ä¸Šçš„ <code>overlayfs</code> æˆ– Windows ä¸Šçš„ <code>CimFS</code> ï¼‰ã€‚
è¿™è¢«ç§°ä¸ºå¯å†™å±‚ã€‚
æœ¬åœ°å†™å…¥ä¹Ÿå¯ä»¥ä½¿ç”¨å¯å†™æ–‡ä»¶ç³»ç»Ÿï¼Œè¯¥æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨å®¹å™¨é•œåƒçš„å®Œæ•´å…‹éš†è¿›è¡Œåˆå§‹åŒ–;è¿™ç”¨äºåŸºäºè™šæ‹Ÿæœºç®¡ç†ç¨‹åºçš„ä¸€äº›è¿è¡Œæ—¶ã€‚</li></ul><p>å®¹å™¨è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»ŸåŒ…å«åªè¯»å±‚å’Œå¯å†™å±‚ã€‚
åœ¨ Kubernetes æ–‡æ¡£ä¸­ï¼Œè¿™è¢«ç§°ä¸º <code>imagefs</code>ã€‚</p><h2 id=å®¹å™¨è¿è¡Œæ—¶é…ç½®>å®¹å™¨è¿è¡Œæ—¶é…ç½®</h2><h3 id=cri-o>CRI-O</h3><p>CRI-O ä½¿ç”¨ TOML æ ¼å¼çš„å­˜å‚¨é…ç½®æ–‡ä»¶ï¼Œè®©ä½ å¯ä»¥æ§åˆ¶å®¹å™¨è¿è¡Œæ—¶å­˜å‚¨æŒä¹…åŒ–å’Œä¸´æ—¶æ•°æ®ã€‚
CRI-O ä½¿ç”¨ <a class=link href=https://github.com/containers/storage target=_blank rel=noopener>storage library</a>ã€‚
ä¸€äº› Linux å‘è¡Œç‰ˆæä¾›äº†å­˜å‚¨çš„æ‰‹å†Œé¡µ (<code>man 5 containers-storage.conf</code>)ã€‚
å­˜å‚¨çš„ä¸»è¦é…ç½®ä½äº <code>/etc/containers/storage.conf</code> ï¼Œç”¨æˆ·å¯ä»¥æ§åˆ¶ä¸´æ—¶æ•°æ®çš„ä½ç½®å’Œæ ¹ç›®å½•ã€‚
æ ¹ç›®å½•æ˜¯ CRI-O å­˜å‚¨æŒä¹…æ•°æ®çš„ä½ç½®ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>storage</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=c># é»˜è®¤å­˜å‚¨é©±åŠ¨ç¨‹åº</span>
</span></span><span class=line><span class=cl><span class=nx>driver</span> <span class=p>=</span> <span class=s2>&#34;overlay&#34;</span>
</span></span><span class=line><span class=cl><span class=c># ä¸´æ—¶å­˜å‚¨ä½ç½®</span>
</span></span><span class=line><span class=cl><span class=nx>runroot</span> <span class=p>=</span> <span class=s2>&#34;/var/run/containers/storage&#34;</span>
</span></span><span class=line><span class=cl><span class=c># å®¹å™¨å­˜å‚¨çš„ä¸»è¦è¯»/å†™ä½ç½®</span>
</span></span><span class=line><span class=cl><span class=nx>graphroot</span> <span class=p>=</span> <span class=s2>&#34;/var/lib/containers/storage&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ul><li><code>graphroot</code><ul><li>å®¹å™¨è¿è¡Œæ—¶çš„æŒä¹…æ•°æ®å­˜å‚¨</li><li>å¦‚æœå¯ç”¨ SELinuxï¼Œåˆ™å¿…é¡»ä¸ <code>/var/lib/containers/storage</code> ç›¸åŒ¹é…</li></ul></li><li><code>runroot</code><ul><li>ä¸´æ—¶è®¿é—®å®¹å™¨çš„è¯»/å†™è®¿é—®</li><li>å»ºè®®å°†æ­¤æ”¾åœ¨ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿä¸­</li></ul></li></ul><p>è¿™é‡Œæœ‰ä¸€ä¸ªå¿«é€Ÿçš„æ–¹æ³•æ¥é‡æ–°æ ‡è®°ä½ çš„ graphroot ç›®å½•ï¼Œä»¥åŒ¹é…<code>/var/lib/containers/storage</code>:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>semanage fcontext -a -e /var/lib/containers/storage &lt;YOUR-STORAGE-PATH&gt;
</span></span><span class=line><span class=cl>restorecon -R -v &lt;YOUR-STORAGE-PATH&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=containerd>containerd</h3><p>containerd ä½¿ç”¨ TOML é…ç½®æ–‡ä»¶æ¥æ§åˆ¶æŒä¹…æ•°æ®å’Œä¸´æ—¶æ•°æ®çš„å­˜å‚¨ä½ç½®ã€‚
é»˜è®¤çš„é…ç½®æ–‡ä»¶è·¯å¾„ä½äº <code>/etc/containerd/config.toml</code>ã€‚</p><p>containerd å­˜å‚¨çš„ç›¸å…³å­—æ®µæ˜¯ <code>root</code> å’Œ <code>state</code>ã€‚</p><ul><li><code>root</code><ul><li>å®¹å™¨è¿è¡Œæ—¶å…ƒæ•°æ®çš„æ ¹ç›®å½•</li><li>é»˜è®¤ä½ç½®ä¸º <code>/var/lib/containerd</code></li><li>å¦‚æœæ‚¨çš„æ“ä½œç³»ç»Ÿéœ€è¦ï¼ŒRoot ä¹Ÿéœ€è¦ SELinux æ ‡ç­¾</li></ul></li><li><code>state</code><ul><li>å®¹å™¨è¿è¡Œæ—¶çš„ä¸´æ—¶æ•°æ®</li><li>é»˜è®¤ä½ç½®ä¸º <code>/run/containerd</code></li></ul></li></ul><h2 id=kubernetes-èŠ‚ç‚¹å‹åŠ›é©±é€>Kubernetes èŠ‚ç‚¹å‹åŠ›é©±é€</h2><p>Kubernetes å°†è‡ªåŠ¨æ£€æµ‹å®¹å™¨æ–‡ä»¶ç³»ç»Ÿæ˜¯å¦ä¸èŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿåˆ†ç¦»ã€‚
å½“å°†æ–‡ä»¶ç³»ç»Ÿåˆ†ç¦»æ—¶ï¼ŒKubernetes è´Ÿè´£ç›‘æ§èŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿå’Œå®¹å™¨è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»Ÿã€‚
Kubernetes æ–‡æ¡£å°†èŠ‚ç‚¹æ–‡ä»¶ç³»ç»Ÿå’Œå®¹å™¨è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»Ÿç§°ä¸º nodefs å’Œ imagefsã€‚
å¦‚æœ nodefs æˆ– imagefs ä¸­çš„ä»»ä½•ä¸€ä¸ªç£ç›˜ç©ºé—´ä¸è¶³ï¼Œåˆ™æ•´ä¸ªèŠ‚ç‚¹è¢«è®¤ä¸ºå­˜åœ¨ç£ç›˜å‹åŠ›ã€‚
Kubernetes é¦–å…ˆé€šè¿‡åˆ é™¤æœªä½¿ç”¨çš„å®¹å™¨å’Œé•œåƒæ¥å›æ”¶ç©ºé—´ï¼Œç„¶åå°†é€å‡º Podã€‚
åœ¨å…·æœ‰ nodefs å’Œ imagefs çš„èŠ‚ç‚¹ä¸Šï¼Œkubelet å°†åœ¨ imagefs ä¸Šä½¿ç”¨<a class=link href=https://kubernetes.io/zh-cn/docs/concepts/architecture/garbage-collection/#containers-images target=_blank rel=noopener>åƒåœ¾æ”¶é›†</a>æ¥æ¸…ç†æœªä½¿ç”¨çš„å®¹å™¨é•œåƒï¼Œå¹¶ä» nodefs ä¸­åˆ é™¤æ­»äº¡çš„ Pod åŠå…¶å®¹å™¨ã€‚
å¦‚æœåªæœ‰ä¸€ä¸ª nodefsï¼Œåˆ™ Kubernetes åƒåœ¾æ”¶é›†åŒ…æ‹¬æ­»äº¡çš„å®¹å™¨ã€æ­»äº¡çš„ Pod å’Œæœªä½¿ç”¨çš„é•œåƒã€‚</p><p>Kubernetes æä¾›äº†è®¸å¤šé…ç½®é€‰é¡¹æ¥ç¡®å®šç£ç›˜æ˜¯å¦å·²æ»¡ã€‚
kubelet ä¸­çš„é©±é€ç®¡ç†å™¨æœ‰ä¸€äº›é…ç½®è®¾ç½®ï¼Œå¯ä»¥è®©ä½ æ§åˆ¶ç›¸å…³çš„é˜ˆå€¼ã€‚
å¯¹äºæ–‡ä»¶ç³»ç»Ÿï¼Œç›¸å…³çš„åº¦é‡æ˜¯<code>nodefs.available</code>ã€<code>nodefs.inodesfree</code>ã€<code>imagefs.available</code>å’Œ<code>imagefs.inodesfree</code>ã€‚
å¦‚æœæ²¡æœ‰ä¸“é—¨ç”¨äºå®¹å™¨è¿è¡Œæ—¶çš„ç£ç›˜ï¼Œåˆ™ä¼šå¿½ç•¥ imagefsã€‚</p><p>ç”¨æˆ·å¯ä»¥ä½¿ç”¨ç°æœ‰çš„é»˜è®¤å€¼æœ‰ï¼š</p><ul><li><code>memory.available</code> &lt; 100MiB</li><li><code>nodefs.available</code> &lt; 10%</li><li><code>imagefs.available</code> &lt; 15%</li><li><code>nodefs.inodesFree</code> &lt; 5% (Linux èŠ‚ç‚¹)</li></ul><p>Kubernetes å…è®¸æ‚¨åœ¨ kubelet é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ç”¨æˆ·è‡ªå®šä¹‰å€¼ï¼Œå…·ä½“ä½ç½®ä¸º <code>EvictionHard</code> å’Œ <code>EvictionSoft</code> é…ç½®é¡¹ã€‚</p><dl><dt><code>EvictionHard</code></dt><dd>å®šä¹‰é™åˆ¶ï¼›ä¸€æ—¦è¶…è¿‡è¿™äº›é™åˆ¶ï¼ŒPod å°†ç«‹å³é©±é€ï¼Œæ²¡æœ‰ä»»ä½•å®½é™æœŸã€‚</dd><dt><code>EvictionSoft</code></dt><dd>å®šä¹‰é™åˆ¶ï¼›ä¸€æ—¦è¶…è¿‡è¿™äº›é™åˆ¶ï¼ŒPod å°†æŒ‰ç…§å„ä¿¡å·æ‰€è®¾ç½®çš„å®½é™æœŸåè¢«ã€‚</dd></dl><p>å¦‚æœä½ ä¸º <code>EvictionHard</code> æŒ‡å®šäº†å€¼ï¼Œé‚£ä¹ˆå®ƒå°†æ›¿ä»£é»˜è®¤å€¼ã€‚
è¿™æ„å‘³ç€åœ¨ä½ çš„é…ç½®ä¸­è®¾ç½®æ‰€æœ‰çš„ä¿¡å·æ˜¾å¾—éå¸¸é‡è¦ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¸‹çš„ kubelet é…ç½®å¯ç”¨äºé…ç½®<a class=link href=https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/node-pressure-eviction/#eviction-signals-and-thresholds target=_blank rel=noopener>é©±é€ä¿¡å·</a>å’Œå®½é™æœŸé€‰é¡¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>kubelet.config.k8s.io/v1beta1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>KubeletConfiguration</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>address</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;192.168.0.8&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>20250</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>serializeImagePulls</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>evictionHard</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>memory.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;100Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;5%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;15%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;5%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>evictionSoft</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>memory.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;100Mi&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;10%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;5%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;15%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;5%&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>evictionSoftGracePeriod</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>memory.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;1m30s&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2m&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>nodefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2m&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.available</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2m&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>imagefs.inodesFree</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;2m&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>evictionMaxPodGracePeriod</span><span class=p>:</span><span class=w> </span><span class=l>60s</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><h3 id=é—®é¢˜>é—®é¢˜</h3><p>Kubernetes é¡¹ç›®å»ºè®®ä½ éµå¾ªé»˜è®¤é©±é€è®¾ç½®æˆ–ç€è®¾ç½®æ‰€æœ‰é©±é€å­—æ®µã€‚
ä½ å¯ä»¥ä½¿ç”¨é»˜è®¤è®¾ç½®æˆ–æŒ‡å®šä½ è‡ªå·±çš„ <code>evictionHard</code> è®¾ç½®ã€‚ å¦‚æœä½ æ¼æ‰ä¸€ä¸ªä¿¡å·ï¼Œé‚£ä¹ˆ Kubernetes å°†ä¸ä¼šç›‘æ§è¯¥èµ„æºã€‚
ç®¡ç†å‘˜æˆ–ç”¨æˆ·å¸¸è§çš„ä¸€ä¸ªé…ç½®é”™è¯¯æ˜¯å°†æ–°çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åœ¨ <code>/var/lib/containers/storage</code> æˆ– <code>/var/lib/containerd</code> ç›®å½•ä¸Šã€‚Kubernetes ä¼šæ£€æµ‹åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå› æ­¤å¦‚æœä½ å·²ç»è¿™æ ·åšï¼Œè¯·ç¡®ä¿æ£€æŸ¥ <code>imagefs.inodesfree</code> å’Œ <code>imagefs.available</code> ç¬¦åˆä½ çš„éœ€è¦ã€‚</p><p>å¦ä¸€ä¸ªä»¤äººå›°æƒ‘çš„æ˜¯ï¼Œå½“ä¸ºèŠ‚ç‚¹å®šä¹‰ä¸€ä¸ªé•œåƒæ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œä¸´æ—¶å­˜å‚¨æŠ¥å‘Šä¸ä¼šæ”¹å˜ã€‚é•œåƒæ–‡ä»¶ç³»ç»Ÿ(<code>imagefs</code>)è¢«ç”¨äºå­˜å‚¨å®¹å™¨é•œåƒå±‚ï¼›å¦‚æœä¸€ä¸ªå®¹å™¨å‘è‡ªå·±çš„æ ¹æ–‡ä»¶ç³»ç»Ÿå†™å…¥ï¼Œé‚£ä¹ˆè¿™ç§æœ¬åœ°å†™å…¥ä¸ä¼šè®¡å…¥åˆ°å®¹å™¨é•œåƒçš„å¤§å°ä¸­ã€‚å®¹å™¨è¿è¡Œæ—¶ç”¨äºå­˜å‚¨æœ¬åœ°ä¿®æ”¹çš„ä½ç½®ç”±è¿è¡Œæ—¶æœ¬èº«å†³å®šï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ªä½ç½®å°±æ˜¯é•œåƒæ–‡ä»¶ç³»ç»Ÿã€‚
å¦‚æœä¸€ä¸ª Pod ä¸­çš„å®¹å™¨åœ¨ <code>emptyDir</code> æ–‡ä»¶ç³»ç»Ÿä¸Šå†™å…¥æ•°æ®ï¼Œé‚£ä¹ˆå®ƒå°†ä½¿ç”¨ <code>nodefs</code> æ–‡ä»¶ç³»ç»Ÿä¸­çš„ç©ºé—´ã€‚
kubelet ä¸€ç›´æ ¹æ® <code>nodefs</code> è¡¨ç¤ºçš„æ–‡ä»¶ç³»ç»ŸæŠ¥å‘Šä¸´æ—¶å­˜å‚¨å®¹é‡å’Œåˆ†é…æƒ…å†µ;å½“ä¸´æ—¶å†™å…¥æ“ä½œå®é™…ä¸Šæ˜¯å†™åˆ°é•œåƒæ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œè¿™ç§å·®åˆ«å¯èƒ½ä¼šè®©äººå›°æƒ‘</p><h3 id=åç»­å·¥ä½œ>åç»­å·¥ä½œ</h3><p>ä¸ºäº†ä¿®å¤ä¸´æ—¶å­˜å‚¨æŠ¥å‘Šçš„ç›¸å…³é™åˆ¶å’Œä¸ºå®¹å™¨è¿è¡Œæ—¶æä¾›æ›´å¤šçš„é…ç½®é€‰é¡¹ï¼ŒSIG Node æ­£åœ¨å¼€å‘ <a class=link href=http://kep.k8s.io/4191 target=_blank rel=noopener>KEP-4191</a>ã€‚
åœ¨ KEP-4191 ä¸­ï¼ŒKubernetes å°†æ£€æµ‹å¯å†™å±‚å’Œåªè¯»å±‚ï¼ˆé•œåƒï¼‰æ˜¯å¦åˆ†ç¦»ã€‚
è¿™å¯ä»¥è®©æˆ‘ä»¬å°†æ‰€æœ‰ä¸´æ—¶å­˜å‚¨ï¼ŒåŒ…æ‹¬å¯å†™å±‚ï¼Œéƒ½æ”¾åœ¨åŒä¸€ä¸ªç£ç›˜ä¸Šï¼ŒåŒæ—¶è¿˜å¯ä»¥ä¸ºé•œåƒåˆ†é…ä¸€ä¸ªå•ç‹¬çš„ç£ç›˜ã€‚</p><h3 id=å‚ä¸å…¶ä¸­>å‚ä¸å…¶ä¸­</h3><p>å¦‚æœä½ æœ‰å…´è¶£å‚ä¸å…¶ä¸­ï¼Œä½ å¯ä»¥åŠ å…¥ <a class=link href=https://github.com/kubernetes/community/tree/master/sig-node target=_blank rel=noopener>Kubernetes Node ç‰¹æ€§å…´è¶£å°ç»„</a> (SIG)ã€‚</p><p>å¦‚æœä½ æœ‰å…´è¶£åˆ†äº«åé¦ˆï¼Œä½ å¯ä»¥åˆ†äº«åˆ°æˆ‘ä»¬çš„<a class=link href=https://kubernetes.slack.com/archives/C0BP8PW9G target=_blank rel=noopener>#sig-node</a> Slack é¢‘é“ã€‚
å¦‚æœä½ è¿˜æ²¡æœ‰åŠ å…¥è¯¥ Slack å·¥ä½œç©ºé—´ï¼Œè¯·è®¿é—® <a class=link href=https://slack.k8s.io/ target=_blank rel=noopener>https://slack.k8s.io/</a> è·å–é‚€è¯·ã€‚</p><p>ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰æä¾›å‡ºè‰²è¯„å®¡ã€åˆ†äº«å®è´µè§è§£æˆ–å»ºè®®ä¸»é¢˜æƒ³æ³•çš„è´¡çŒ®è€…ã€‚</p><ul><li>Peter Hunt</li><li>Mrunal Patel</li><li>Ryan Phillips</li><li>Gaurav Singh</li></ul><blockquote><p>åŸæ–‡åœ°å€: <a class=link href=https://kubernetes.io/blog/2024/01/23/kubernetes-separate-image-filesystem/ target=_blank rel=noopener>https://kubernetes.io/blog/2024/01/23/kubernetes-separate-image-filesystem/</a></p><p>å®˜æ–¹è¯‘æ–‡: <a class=link href=https://kubernetes.io/zh-cn/blog/2024/01/23/kubernetes-separate-image-filesystem/ target=_blank rel=noopener>https://kubernetes.io/zh-cn/blog/2024/01/23/kubernetes-separate-image-filesystem/</a></p></blockquote></section><footer class=article-footer><section class=article-tags><a href=/tags/kubernetes/>Kubernetes</a>
<a href=/tags/kubernetes-blog/>Kubernetes Blog</a>
<a href=/tags/%E7%BF%BB%E8%AF%91/>ç¿»è¯‘</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/k8s/2024/03/16/kubernetes-1-30-upcoming-changes/><div class=article-image><img src="https://www.bing.com/th?id=OHR.BambooPanda_ZH-CN8455481760_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp" loading=lazy data-key=kubernetes-1-30-upcoming-changes data-hash="https://www.bing.com/th?id=OHR.BambooPanda_ZH-CN8455481760_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp"></div><div class=article-details><h2 class=article-title>Kubernetes v1.30 åˆæ¢</h2></div></a></article><article class=has-image><a href=/k8s/2024/03/08/cri-o-seccomp-oci-artifacts/><div class=article-image><img src="https://s.cn.bing.net/th?id=OHR.IguazuFalls_ZH-CN4749837052_1920x1080.webp&amp;qlt=50" loading=lazy data-key=cri-o-seccomp-oci-artifacts data-hash="https://s.cn.bing.net/th?id=OHR.IguazuFalls_ZH-CN4749837052_1920x1080.webp&amp;qlt=50"></div><div class=article-details><h2 class=article-title>CRI-Oï¼šåº”ç”¨æ¥è‡ª OCI æ³¨å†Œä¸­å¿ƒçš„ seccomp é…ç½®æ–‡ä»¶</h2></div></a></article><article class=has-image><a href=/k8s/2024/03/02/sig-cloud-provider-spotlight-2024/><div class=article-image><img src="https://www4.bing.com//th?id=OHR.LeapingSquirrel_ZH-CN9112090462_1920x1080.jpg" loading=lazy data-key=sig-cloud-provider-spotlight-2024 data-hash="https://www4.bing.com//th?id=OHR.LeapingSquirrel_ZH-CN9112090462_1920x1080.jpg"></div><div class=article-details><h2 class=article-title>èšç„¦ SIG äº‘æä¾›å•†</h2></div></a></article><article class=has-image><a href=/2025/05/load-balancing-in-kubernetes/><div class=article-image><img src="https://www4.bing.com//th?id=OHR.SongyangTeaGarden_ZH-CN4763170909_UHD.jpg" loading=lazy data-key=load-balancing-in-kubernetes data-hash="https://www4.bing.com//th?id=OHR.SongyangTeaGarden_ZH-CN4763170909_UHD.jpg"></div><div class=article-details><h2 class=article-title>Kubernetes ä¸­çš„è´Ÿè½½å‡è¡¡</h2></div></a></article><article class=has-image><a href=/k8s/2024/03/20/nodeport-hostport-hostnetwork/><div class=article-image><img src="https://s.cn.bing.net/th?id=OHR.WhiteEyes_ZH-CN1130380430_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp" loading=lazy data-key=nodeport-hostport-hostnetwork data-hash="https://s.cn.bing.net/th?id=OHR.WhiteEyes_ZH-CN1130380430_1920x1080.jpg&amp;rf=LaDigue_1920x1080.jpg&amp;pid=hp"></div><div class=article-details><h2 class=article-title>NodePortå’ŒHostPortä¸HostNetworkä¹‹é—´çš„åŒºåˆ«</h2></div></a></article></div></div></aside><script src=https://giscus.app/client.js data-repo=techoc/blog data-repo-id=R_kgDOLbcnXg data-category=Announcements data-category-id=DIC_kwDOLbcnXs4Cdtg0 data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=light data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark_dimmed")}})()</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2025 Techoc`s</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>